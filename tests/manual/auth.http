@endpoint = http://localhost:3001/api/v1
@userEndpoint = {{endpoint}}/users
@authEndpoint = {{endpoint}}/auth
@albumEndpoint = {{endpoint}}/albums

### Create a new user
# @name createUser
POST {{userEndpoint}} HTTP/1.1
content-type: application/json

{
  "name": "Test User",
  "phonenumber": "5551234567",
  "email": "testuser@example.com",
  "password": "TestPassword123"
}

### Login with the user credentials
# @name login
POST {{authEndpoint}} HTTP/1.1
content-type: application/json

{
  "email": "testuser@example.com",
  "password": "TestPassword123"
}

### Store the access token from login response
@accessToken = {{login.response.body.accessToken}}

### Get all users (requires JWT)
GET {{userEndpoint}} HTTP/1.1
Authorization: Bearer {{accessToken}}

### Get specific user (requires JWT)
GET {{userEndpoint}}/testuser@example.com HTTP/1.1
Authorization: Bearer {{accessToken}}

### Create an album (requires JWT)
# @name createAlbum
POST {{albumEndpoint}} HTTP/1.1
Authorization: Bearer {{accessToken}}
content-type: application/json

{
  "title": "Test Album",
  "artist": "Test Artist",
  "rating": 5,
  "acquiredDate": "2023-10-15",
  "isBorrowed": false,
  "owner": "Test User"
}

### Get album (no JWT required)
GET {{albumEndpoint}} HTTP/1.1

### Test invalid credentials
POST {{authEndpoint}} HTTP/1.1
content-type: application/json

{
  "email": "testuser@example.com",
  "password": "WrongPassword"
}

### Test missing authorization header on protected route
GET {{userEndpoint}} HTTP/1.1

### Test invalid token
GET {{userEndpoint}} HTTP/1.1
Authorization: Bearer invalid.token.here
